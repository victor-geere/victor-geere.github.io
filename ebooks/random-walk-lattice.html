<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Random Walks and Binomial Lattices in Finance</title>
    <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <style>
        body {
            font-family: 'Arial', sans-serif;
            line-height: 1.6;
        }
        .content {

            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
        }
        canvas {
            display: block;
            margin: 20px 0;
        }
        .slider-container {
            margin: 10px 0;
        }
        h1, h2 {
            text-align: center;
        }
        #explanations {
            font-family: sans-serif;
            margin-top: 20px;
        }
    </style>
</head>
<body>
<div class="content">
    <h1>Random Walks and Binomial Lattices in Finance</h1>
    <p><em>Generated on: Tuesday, June 03, 2025, 10:34 PM SAST</em></p>
    <p>
        This ebook explores the mathematical foundations of random walks and their applications in financial modeling,
        focusing on the maximum deviation of a random walk and the binomial lattice model. It includes interactive
        visualizations to enhance understanding.
    </p>

    <h2>Table of Contents</h2>
    <ul>
        <li><a href="#introduction">Introduction</a></li>
        <li><a href="#maximum-deviation">Maximum Deviation of a Random Walk</a></li>
        <li><a href="#binomial-lattice">Binomial Lattice Model in Finance</a></li>
        <li><a href="#relationship">Relationship Between the Formulas</a></li>
        <li><a href="#interactive-graph">Interactive Graph: Geometric Brownian Motion and Log Price Factors</a></li>
        <li><a href="#conclusion">Conclusion</a></li>
    </ul>

    <h2 id="introduction">Introduction</h2>
    <p>
        Welcome to this ebook, which distills a conversation about the fascinating interplay between random walks and
        financial modeling. Random walks are mathematical constructs that model a sequence of random steps, serving
        as a cornerstone for understanding stochastic processes in various disciplines. In finance, they underpin
        models of asset price movements, such as the binomial lattice model and geometric Brownian motion. This ebook
        aims to elucidate two key concepts: the maximum deviation of a random walk and the step size in the binomial
        lattice model, and to demonstrate how these ideas are interconnected.
    </p>
    <p>
        Through structured sections, mathematical rigor, and interactive elements, this ebook provides a comprehensive
        resource for readers interested in probability theory and its financial applications. Whether you’re a student,
        a practitioner, or a curious learner, you’ll find detailed explanations and visualizations to deepen your
        understanding.
    </p>

    <h2 id="maximum-deviation">Maximum Deviation of a Random Walk</h2>
    <p>
        The maximum deviation of a random walk is a fundamental concept in stochastic processes, particularly when applied
        to the Wiener process (Brownian motion). Consider a Wiener process \( W(t) \) with variance \( \sigma^2 t \),
        where \( \sigma \) is the volatility and \( t \) is time. The maximum deviation over a time interval \( [0, T] \)
        is defined as \( M_T = \sup_{0 \leq s \leq T} |W(s)| \), representing the largest absolute fluctuation of the
        process up to time \( T \).
    </p>
    <p>
        For large \( T \), the law of the iterated logarithm provides an asymptotic bound on this deviation:
    </p>
    \[ \limsup_{T \to \infty} \frac{M_T}{\sqrt{2 \sigma^2 T \log \log T}} = 1 \quad \text{almost surely.} \]
    <p>
        This formula indicates that the maximum deviation scales approximately with \( \sigma \sqrt{2 T \log \log T} \) for
        large \( T \). The \( \sqrt{T} \) term reflects the diffusive nature of Brownian motion, while the \( \log \log T \)
        factor introduces a slow-growing correction, highlighting the extremes of random fluctuations over long periods.
    </p>

    <h2 id="binomial-lattice">Binomial Lattice Model in Finance</h2>
    <p>
        The binomial lattice model is a discrete-time approach widely used in finance to model asset price evolution and
        to price options. In this model, at each time step of size \( \delta T \), the asset price can either increase by
        a factor \( u = e^{\sigma \sqrt{\delta T}} \) or decrease by a factor \( d = e^{-\sigma \sqrt{\delta T}} \), where
        \( \sigma \) is the volatility. These factors are chosen to approximate the continuous-time geometric Brownian
        motion as the number of steps increases.
    </p>
    <p>
        The log-price, \( \log(S_t / S_0) \), in the binomial model behaves like a discrete random walk, with each step size
        equal to \( \pm \sigma \sqrt{\delta T} \) (assuming a symmetric probability of 0.5 for simplicity in this context).
        Over \( n = T / \delta T \) steps, this discrete process mimics the continuous Wiener process, making the binomial
        model a practical tool for option pricing and risk analysis. The simplicity of this two-state model allows for
        efficient computation while capturing the stochastic dynamics of asset prices.
    </p>

    <h2 id="relationship">Relationship Between the Formulas</h2>
    <p>
        The maximum deviation of a random walk and the step size in the binomial lattice model are related as discrete and
        continuous representations of asset price movements. In the binomial lattice model, the log-price follows a
        discrete random walk with step size \( \sigma \sqrt{\delta T} \). Over \( n = T / \delta T \) steps, as \( \delta T \)
        becomes small (and \( n \) large), the maximum deviation of this log-price approximates the Wiener process’s
        maximum deviation, converging to \( \sigma \sqrt{2 T \log \log T} \) for large \( T \).
    </p>
    <p>
        The per-step price factors \( u = e^{\sigma \sqrt{\delta T}} \) and \( d = e^{-\sigma \sqrt{\delta T}} \) determine
        incremental changes. The maximum price factor over the period \( T \) for a specific path is the highest \( S_k / S_0 \)
        reached, and the minimum is the lowest, which relate to the exponential of the maximum and minimum log-price deviations.
        Asymptotically, the maximum price factor approximates \( e^{\sigma \sqrt{2 T \log \log T}} \), bridging the discrete
        and continuous frameworks.
    </p>

    <h2 id="interactive-graph">Interactive Graph: Geometric Brownian Motion and Log Price Factors</h2>
    <p>
        Below is an interactive visualization that simulates a price path using the binomial lattice model, approximating
        geometric Brownian motion. Adjust the sliders for volatility (\( \sigma \)), time (\( T \)), and number of steps
        (\( n \)) to explore their effects on the price path and its extremes. Click "Refresh" to generate a new simulation.
        The graph includes horizontal lines indicating the minimum price, maximum price, and theoretical maximum and minimum
        prices based on the law of the iterated logarithm.
    </p>

    <div class="slider-container">
        Volatility (σ): <input type="range" id="sigma" min="0.01" max="1" step="0.01" value="0.2">
    </div>
    <div class="slider-container">
        Time (T): <input type="range" id="T" min="2.8" max="1000" step="0.1" value="3">
    </div>
    <div class="slider-container">
        Number of Steps (n): <input type="range" id="n" min="10" max="1000" step="10" value="100">
    </div>
    <button id="refresh">Refresh</button>

    <canvas id="priceChart" width="600" height="400"></canvas>

    <div id="info">
        T: <span id="T_val"></span><br>
        log T: <span id="logT_val"></span><br>
        log log T: <span id="loglogT_val"></span><br>
        σ: <span id="sigma_val"></span><br>
        theoreticalMax: <span id="theoreticalMax_val"></span><br>
        maxUpFactor: <span id="maxUpFactor_val"></span><br>
        maxDownFactor: <span id="maxDownFactor_val"></span><br>
        log(maxUpFactor): <span id="logMaxUp_val"></span><br>
        log(maxDownFactor): <span id="logMaxDown_val"></span>
    </div>

    <div id="explanations">
        <h3>Inputs and Outputs Explained</h3>
        <ul>
            <li><strong>T</strong>: Total time period for the simulation.</li>
            <li><strong>log T</strong>: Natural logarithm of T.</li>
            <li><strong>log log T</strong>: Natural logarithm of log T, defined since T ≥ e.</li>
            <li><strong>σ</strong>: Volatility parameter controlling the magnitude of price fluctuations.</li>
            <li><strong>theoreticalMax</strong>: Theoretical maximum deviation of the log-price, calculated as \( \sigma \sqrt{2 T \log \log T} \).</li>
            <li><strong>maxUpFactor</strong>: Maximum price factor observed in the simulation (highest price).</li>
            <li><strong>maxDownFactor</strong>: Minimum price factor observed in the simulation (lowest price).</li>
            <li><strong>log(maxUpFactor)</strong>: Natural logarithm of the maximum price factor.</li>
            <li><strong>log(maxDownFactor)</strong>: Natural logarithm of the minimum price factor.</li>
        </ul>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const sigmaSlider = document.getElementById('sigma');
            const TSlider = document.getElementById('T');
            const nSlider = document.getElementById('n');
            const refreshButton = document.getElementById('refresh');
            const canvas = document.getElementById('priceChart');
            const ctx = canvas.getContext('2d');

            function drawGraph(S, n, y_max, minPrice, maxPrice, theoreticalMinPrice, theoreticalMaxPrice) {
                ctx.clearRect(0, 0, canvas.width, canvas.height);
                ctx.strokeStyle = 'black';
                ctx.lineWidth = 1;
                ctx.font = '12px Arial';

                // Draw axes
                ctx.beginPath();
                ctx.moveTo(1, canvas.height);
                ctx.lineTo(canvas.width, canvas.height);
                ctx.moveTo(1, 0);
                ctx.lineTo(1, canvas.height);
                ctx.stroke();

                // Draw labels
                ctx.fillText("Time", canvas.width / 2, canvas.height - 10);
                ctx.fillText("Price", 20, 20);

                // Draw price path
                ctx.beginPath();
                ctx.moveTo(0, canvas.height - (S[0] / y_max) * canvas.height);
                for (let i = 1; i <= n; i++) {
                    const x = (i / n) * canvas.width;
                    const y = canvas.height - (S[i] / y_max) * canvas.height;
                    ctx.lineTo(x, y);
                }
                ctx.strokeStyle = 'blue';
                ctx.stroke();

                // Calculate y-positions for horizontal lines
                const y_minPrice = canvas.height - (minPrice / y_max) * canvas.height;
                const y_maxPrice = canvas.height - (maxPrice / y_max) * canvas.height;
                const y_theoreticalMinPrice = canvas.height - (theoreticalMinPrice / y_max) * canvas.height;
                const y_theoreticalMaxPrice = canvas.height - (theoreticalMaxPrice / y_max) * canvas.height;

                // Draw horizontal lines
                // Min Price (solid green)
                ctx.beginPath();
                ctx.moveTo(0, y_minPrice);
                ctx.lineTo(canvas.width, y_minPrice);
                ctx.strokeStyle = 'green';
                ctx.stroke();
                ctx.fillStyle = 'green';
                ctx.fillText("Min Price", canvas.width - 80, y_minPrice - 5);

                // Max Price (solid red)
                ctx.beginPath();
                ctx.moveTo(0, y_maxPrice);
                ctx.lineTo(canvas.width, y_maxPrice);
                ctx.strokeStyle = 'red';
                ctx.stroke();
                ctx.fillStyle = 'red';
                ctx.fillText("Max Price", canvas.width - 80, y_maxPrice - 5);

                // Theoretical Min Price (dashed blue)
                ctx.setLineDash([5, 5]);
                ctx.beginPath();
                ctx.moveTo(0, y_theoreticalMinPrice);
                ctx.lineTo(canvas.width, y_theoreticalMinPrice);
                ctx.strokeStyle = 'blue';
                ctx.stroke();
                ctx.setLineDash([]);
                ctx.fillStyle = 'blue';
                ctx.fillText("Theoretical Min", canvas.width - 80, y_theoreticalMinPrice - 5);

                // Theoretical Max Price (dashed purple)
                ctx.setLineDash([5, 5]);
                ctx.beginPath();
                ctx.moveTo(0, y_theoreticalMaxPrice);
                ctx.lineTo(canvas.width, y_theoreticalMaxPrice);
                ctx.strokeStyle = 'purple';
                ctx.stroke();
                ctx.setLineDash([]);
                ctx.fillStyle = 'purple';
                ctx.fillText("Theoretical Max", canvas.width - 80, y_theoreticalMaxPrice - 5);
            }

            function update() {
                const sigma = parseFloat(sigmaSlider.value);
                const T = parseFloat(TSlider.value);
                const n = parseInt(nSlider.value);
                const deltaT = T / n;

                // Simulate the binomial lattice path
                let logS = [0]; // Starting log-price at 0 (S_0 = 1)
                let currentLogS = 0;
                for (let k = 1; k <= n; k++) {
                    const step = sigma * Math.sqrt(deltaT) * (Math.random() < 0.5 ? 1 : -1);
                    currentLogS += step;
                    logS.push(currentLogS);
                }
                const S = logS.map(x => Math.exp(x)); // Price path

                // Compute min and max prices
                const minPrice = Math.min(...S);
                const maxPrice = Math.max(...S);
                const logMaxUp = Math.log(maxPrice);
                const logMaxDown = Math.log(minPrice);

                // Compute theoretical values
                const logT = Math.log(T);
                const loglogT = Math.log(logT);
                const theoreticalMax = sigma * Math.sqrt(2 * T * loglogT);
                const theoreticalMaxPrice = Math.exp(theoreticalMax);
                const theoreticalMinPrice = Math.exp(-theoreticalMax);

                // Set y_max for scaling the graph
                const y_max = Math.max(maxPrice, theoreticalMaxPrice) * 1.1;

                // Update info display
                document.getElementById('T_val').textContent = T.toFixed(2);
                document.getElementById('logT_val').textContent = logT.toFixed(4);
                document.getElementById('loglogT_val').textContent = loglogT.toFixed(4);
                document.getElementById('sigma_val').textContent = sigma.toFixed(2);
                document.getElementById('theoreticalMax_val').textContent = theoreticalMax.toFixed(4);
                document.getElementById('maxUpFactor_val').textContent = maxPrice.toFixed(4);
                document.getElementById('maxDownFactor_val').textContent = minPrice.toFixed(4);
                document.getElementById('logMaxUp_val').textContent = logMaxUp.toFixed(4);
                document.getElementById('logMaxDown_val').textContent = logMaxDown.toFixed(4);

                // Draw the graph with horizontal lines
                drawGraph(S, n, y_max, minPrice, maxPrice, theoreticalMinPrice, theoreticalMaxPrice);
            }

            // Initial update and event listeners
            update();
            sigmaSlider.addEventListener('input', update);
            TSlider.addEventListener('input', update);
            nSlider.addEventListener('input', update);
            refreshButton.addEventListener('click', update);
        });
    </script>

    <h2 id="conclusion">Conclusion</h2>
    <p>
        This ebook has provided a detailed exploration of random walks and their financial applications, focusing on the
        maximum deviation of a Wiener process and the binomial lattice model. We’ve seen how the maximum deviation, scaling
        asymptotically as \( \sigma \sqrt{2 T \log \log T} \), quantifies the extremes of price movements, while the binomial
        model’s step sizes \( e^{\pm \sigma \sqrt{\delta T}} \) build a discrete approximation to these dynamics. Their
        relationship highlights the unity between discrete and continuous stochastic models, offering valuable insights
        for financial analysis.
    </p>
    <p>
        The interactive graph reinforces these concepts, allowing you to visualize how volatility, time, and steps shape
        asset price paths. Together, these tools and explanations equip you with a deeper understanding of randomness in
        finance, applicable to option pricing, risk management, and beyond.
    </p>
</div>
</body>
</html>