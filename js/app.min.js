angular.module("weather-module",[]),angular.module("weather-module").service("weatherService",["$http",function(e){this.getWeather=function(t){var r={params:t};return r.params.APPID="53f9d8e4213222cf517d86dc406d67fc",r.params.units="metric",e.get("https://api.openweathermap.org/data/2.5/weather",r)}}]),angular.module("weather-module").controller("WeatherController",["$scope","weatherService","$rootScope",function(e,t,r){var o=this;return o.statuses={LOADING:0,READY:1},o.model={location:{lat:"",lon:""},weather:{},status:o.statuses.READY,errorMessage:"",error:!1},o.setError=function(e){o.model.error=!0,o.model.errorMessage=e,o.model.status=o.statuses.READY,r.$digest()},o.clearError=function(){o.model.error=!1,o.model.errorMessage=""},o.showPosition=function(e){o.model.location={lat:e.coords.latitude,lon:e.coords.longitude},o.refresh()},o.showError=function(e){switch(e.code){case e.PERMISSION_DENIED:o.setError("Location information withheld.");break;case e.POSITION_UNAVAILABLE:o.setError("Location information is unavailable.");break;case e.TIMEOUT:o.setError("The request to get user location timed out.");break;case e.UNKNOWN_ERROR:o.setError("An unknown error occurred.")}},o.getLocation=function(){o.clearError(),navigator.geolocation?navigator.geolocation.getCurrentPosition(o.showPosition,o.showError):o.setError("Geolocation is not supported by this browser.")},o.isReady=function(){return o.model.status==o.statuses.READY},o.refresh=function(){o.model.status=o.statuses.LOADING,t.getWeather(o.model.location).then(function(e){o.model.weather=e}).catch(function(e){o.setError("Weather data could not be found.")}).finally(function(){o.model.status=o.statuses.READY})},o.getCity=function(){return o.model.city},o.getLon=function(){var e=0;try{e=o.model.weather.data.coord.lon}catch(e){}return e},o.getLat=function(){var e=0;try{e=o.model.weather.data.coord.lat}catch(e){}return e},o.getWeather=function(){return{city:o.model.city,weather:o.model.weather}},o.getLocation(),o}]);